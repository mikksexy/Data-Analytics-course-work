/*
 * Author: Sami Mikkola
 * Steps for loading the data
 *  - Download and install Postgres on your machine (see www.postgres.org)
 *  - Download data files and script
 *  - Start Postgres and create a database called htcs
 *  - Replace all instances of $LOADDIR$ with the correct path
 *  - Run this script from inside Postgres
 */
 


CREATE TABLE Results (
	date date NOT NULL,
	team_1 varchar(50) NOT NULL,
	team_2 varchar(50) NOT NULL,
	_map varchar(50) NOT NULL,
	result_1 smallint NOT NULL,
	result_2 smallint NOT NULL,
	map_winner char(1) NOT NULL,
	starting_ct char(1) NOT NULL,
	ct_1 smallint NOT NULL,
	t_2 smallint NOT NULL,
	t_1 smallint NOT NULL,
	ct_2 smallint NOT NULL,
	event_id int NOT NULL,
	match_id int NOT NULL,
	rank_1 smallint NOT NULL,
	rank_2 smallint NOT NULL,
	map_wins_1 smallint NOT NULL,
	map_wins_2 smallint NOT NULL,
	match_winner char(1) NOT NULL,
	PRIMARY KEY (match_id, _map)
) ;


COPY Results FROM '/home/sami/database/data/results.csv'
    DELIMITER ','
	CSV HEADER;


CREATE TABLE Picks (
	date date NOT NULL,
	team_1 varchar(50) NOT NULL,
	team_2 varchar(50) NOT NULL,
	inverted_teams char(1) NOT NULL,
	match_id int NOT NULL PRIMARY KEY,
	event_id int NOT NULL,
	best_of varchar(20) NOT NULL,
	system varchar(50) NOT NULL,
	t1_removed_1 varchar(50) NOT NULL,
	t1_removed_2 varchar(50) NOT NULL,
	t1_removed_3 varchar(50) NOT NULL,
	t2_removed_1 varchar(50) NOT NULL,
	t2_removed_2 varchar(50) NOT NULL,
	t2_removed_3 varchar(50) NOT NULL,
	t1_picked_1 varchar(50) NOT NULL,
	t2_picked_1 varchar(50) NOT NULL,
	left_over varchar(50) NOT NULL
) ;

COPY Picks FROM '/home/sami/database/data/picks.csv'
    DELIMITER ','
	CSV HEADER;


CREATE TABLE Economy (
	date date NOT NULL,
	match_id int NOT NULL,
	event_id int NOT NULL,
	team_1 varchar(50) NOT NULL,
	team_2 varchar(50) NOT NULL,
	best_of varchar(20) NOT NULL,
	_map varchar(50) NOT NULL,
	t1_start varchar(2) NOT NULL,
	t2_start varchar(2) NOT NULL,
	"1_t1" decimal(19,4),
	"2_t1" decimal(19,4),
	"3_t1" decimal(19,4),
	"4_t1" decimal(19,4),
	"5_t1" decimal(19,4),
	"6_t1" decimal(19,4),
	"7_t1" decimal(19,4),
	"8_t1" decimal(19,4),
	"9_t1" decimal(19,4),
	"10_t1" decimal(19,4),
	"11_t1" decimal(19,4),
	"12_t1" decimal(19,4),
	"13_t1" decimal(19,4),
	"14_t1" decimal(19,4),
	"15_t1" decimal(19,4),
	"16_t1" decimal(19,4),
	"17_t1" decimal(19,4),
	"18_t1" decimal(19,4),
	"19_t1" decimal(19,4),
	"20_t1" decimal(19,4),
	"21_t1" decimal(19,4),
	"22_t1" decimal(19,4),
	"23_t1" decimal(19,4),
	"24_t1" decimal(19,4),
	"25_t1" decimal(19,4),
	"26_t1" decimal(19,4),
	"27_t1" decimal(19,4),
	"28_t1" decimal(19,4),
	"29_t1" decimal(19,4),
	"30_t1" decimal(19,4),
	"1_t2" decimal(19,4),
	"2_t2" decimal(19,4),
	"3_t2" decimal(19,4),
	"4_t2" decimal(19,4),
	"5_t2" decimal(19,4),
	"6_t2" decimal(19,4),
	"7_t2" decimal(19,4),
	"8_t2" decimal(19,4),
	"9_t2" decimal(19,4),
	"10_t2" decimal(19,4),
	"11_t2" decimal(19,4),
	"12_t2" decimal(19,4),
	"13_t2" decimal(19,4),
	"14_t2" decimal(19,4),
	"15_t2" decimal(19,4),
	"16_t2" decimal(19,4),
	"17_t2" decimal(19,4),
	"18_t2" decimal(19,4),
	"19_t2" decimal(19,4),
	"20_t2" decimal(19,4),
	"21_t2" decimal(19,4),
	"22_t2" decimal(19,4),
	"23_t2" decimal(19,4),
	"24_t2" decimal(19,4),
	"25_t2" decimal(19,4),
	"26_t2" decimal(19,4),
	"27_t2" decimal(19,4),
	"28_t2" decimal(19,4),
	"29_t2" decimal(19,4),
	"30_t2" decimal(19,4),
	"1_winner" decimal(19,4),
	"2_winner" decimal(19,4),
	"3_winner" decimal(19,4),
	"4_winner" decimal(19,4),
	"5_winner" decimal(19,4),
	"6_winner" decimal(19,4),
	"7_winner" decimal(19,4),
	"8_winner" decimal(19,4),
	"9_winner" decimal(19,4),
	"10_winner" decimal(19,4),
	"11_winner" decimal(19,4),
	"12_winner" decimal(19,4),
	"13_winner" decimal(19,4),
	"14_winner" decimal(19,4),
	"15_winner" decimal(19,4),
	"16_winner" decimal(19,4),
	"17_winner" decimal(19,4),
	"18_winner" decimal(19,4),
	"19_winner" decimal(19,4),
	"20_winner" decimal(19,4),
	"21_winner" decimal(19,4),
	"22_winner" decimal(19,4),
	"23_winner" decimal(19,4),
	"24_winner" decimal(19,4),
	"25_winner" decimal(19,4),
	"26_winner" decimal(19,4),
	"27_winner" decimal(19,4),
	"28_winner" decimal(19,4),
	"29_winner" decimal(19,4),
	"30_winner" decimal(19,4),
	PRIMARY KEY (match_id, _map)
) ;


COPY Economy FROM '/home/sami/database/data/economy.csv'
    DELIMITER ','
	CSV HEADER;


CREATE TABLE Players (
	date date NOT NULL,
	player_name varchar(50),
	team varchar(50) NOT NULL,
	opponent varchar(50) NOT NULL,
	country varchar(50) NOT NULL,
	player_id int NOT NULL,
	match_id int NOT NULL,
	event_id int NOT NULL,
	event_name varchar(100) NOT NULL,
	best_of varchar(20) NOT NULL,
	map_1 varchar(50) NOT NULL,
	map_2 varchar(50),
	map_3 varchar(50),
	kills decimal(19, 4),
	assists decimal(19, 4),
	deaths decimal(19, 4),
	hs decimal(19, 4),
	flash_assists decimal(19, 4),
	kast decimal(19,4),
	kddiff decimal(19, 4),
	adr decimal(19, 4),
	fkdiff decimal(19, 4),
	rating decimal(19, 4),
	m1_kills decimal(19, 4),
	m1_assists decimal(19, 4),
	m1_deaths decimal(19, 4),
	m1_hs decimal(19, 4),
	m1_flash_assists decimal(19, 4),
	m1_kast decimal(19,4),
	m1_kddiff decimal(19, 4),
	m1_adr decimal(19, 4),
	m1_fkdiff decimal(19, 4),
	m1_rating decimal(19, 4),
	m2_kills decimal(19, 4),
	m2_assists decimal(19, 4),
	m2_deaths decimal(19, 4),
	m2_hs decimal(19, 4),
	m2_flash_assists decimal(19, 4),
	m2_kast decimal(19,4),
	m2_kddiff decimal(19, 4),
	m2_adr decimal(19, 4),
	m2_fkdiff decimal(19, 4),
	m2_rating decimal(19, 4),
	m3_kills decimal(19, 4),
	m3_assists decimal(19, 4),
	m3_deaths decimal(19, 4),
	m3_hs decimal(19, 4),
	m3_flash_assists decimal(19, 4),
	m3_kast decimal(19, 4),
	m3_kddiff decimal(19, 4),
	m3_adr decimal(19, 4),
	m3_fkdiff decimal(19, 4),
	m3_rating decimal(19, 4),
	kills_ct decimal(19, 4),
	deaths_ct decimal(19, 4),
	kddiff_ct decimal(19, 4),
	adr_ct decimal(19, 4),
	kast_ct decimal(19, 4),
	rating_ct decimal(19, 4),
	kills_t decimal(19, 4),
	deaths_t decimal(19, 4),
	kddiff_t decimal(19, 4),
	adr_t decimal(19, 4),
	kast_t decimal(19, 4),
	rating_t decimal(19, 4),
	m1_kills_ct decimal(19, 4),
	m1_deaths_ct decimal(19, 4),
	m1_kddiff_ct decimal(19, 4),
	m1_adr_ct decimal(19, 4),
	m1_kast_ct decimal(19, 4),
	m1_rating_ct decimal(19, 4),
	m1_kills_t decimal(19, 4),
	m1_deaths_t decimal(19, 4),
	m1_kddiff_t decimal(19, 4),
	m1_adr_t decimal(19, 4),
	m1_kast_t decimal(19, 4),
	m1_rating_t decimal(19, 4),
	m2_kills_ct decimal(19, 4),
	m2_deaths_ct decimal(19, 4),
	m2_kddiff_ct decimal(19, 4),
	m2_adr_ct decimal(19, 4),
	m2_kast_ct decimal(19, 4),
	m2_rating_ct decimal(19, 4),
	m2_kills_t decimal(19, 4),
	m2_deaths_t decimal(19, 4),
	m2_kddiff_t decimal(19, 4),
	m2_adr_t decimal(19, 4),
	m2_kast_t decimal(19, 4),
	m2_rating_t decimal(19, 4),
	m3_kills_ct decimal(19, 4),
	m3_deaths_ct decimal(19, 4),
	m3_kddiff_ct decimal(19, 4),
	m3_adr_ct decimal(19, 4),
	m3_kast_ct decimal(19, 4),
	m3_rating_ct decimal(19, 4),
	m3_kills_t decimal(19, 4),
	m3_deaths_t decimal(19, 4),
	m3_kddiff_t decimal(19, 4),
	m3_adr_t decimal(19, 4),
	m3_kast_t decimal(19, 4),
	m3_rating_t decimal(19, 4),
	PRIMARY KEY (match_id, player_id)
) ;


COPY Players FROM '/home/sami/database/data/players.csv'
    DELIMITER ','
	CSV HEADER;

